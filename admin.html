<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… - Ù…Ø§Ù‡Ø± ÙÙˆÙ†</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
<style>
    body { background: #f8f9fa; }
    .product-img { height: 100px; object-fit: contain; }
</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark p-3">
    <div class="container d-flex justify-content-between">
        <a class="navbar-brand" href="index.html">ğŸ”§ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… - Ù…Ø§Ù‡Ø± ÙÙˆÙ†</a>
        <div>
            <button class="btn btn-outline-light me-2" onclick="location.href='products.html'">Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ¬Ø±</button>
            <button class="btn btn-light" onclick="location.href='cart.html'">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</button>
        </div>
    </div>
</nav>

<div class="container mt-4">
<div id="authArea" class="card p-4">
<h4>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©</h4>
<p>Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p>
<div class="row g-2">
<div class="col-md-6"><input id="adminPass" class="form-control" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"></div>
<div class="col-md-6"><button class="btn btn-primary" onclick="login()">Ø¯Ø®ÙˆÙ„</button></div>
</div>
<small class="text-muted mt-2 d-block">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: <strong></strong></small>
</div>

<div id="adminPanel" class="mt-4" style="display:none;">
<div class="card p-3 mb-3">
<h5>Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬</h5>
<input id="prodId" type="hidden">
<div class="row g-2">
<div class="col-md-4"><input id="prodName" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></div>
<div class="col-md-2"><input id="prodPrice" type="number" class="form-control" placeholder="Ø§Ù„Ø³Ø¹Ø±"></div>
<div class="col-md-4"><input id="prodImg" class="form-control" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©"></div>
<div class="col-md-2"><input id="prodCat" class="form-control" placeholder="Ø§Ù„Ù‚Ø³Ù…"></div>
</div>
<div class="mt-2">
<button class="btn btn-success" onclick="saveProduct()">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
<button class="btn btn-secondary" onclick="resetForm()">Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
</div>
</div>

<div class="card p-3">
<h5>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h5>
<div id="adminProducts" class="row g-3 mt-2"></div>
</div>
</div>
</div>

<script>
const ADMIN_PASS = 'maher123';
function getProducts() { let p = JSON.parse(localStorage.getItem('products')); return p && Array.isArray(p)?p:[]; }
function saveProducts(p) { localStorage.setItem('products', JSON.stringify(p)); window.dispatchEvent(new Event('storage')); }
function cryptoRandomId() { return 'id-'+Math.random().toString(36).slice(2,9); }

function login() {
    if(document.getElementById('adminPass').value === ADMIN_PASS){
        document.getElementById('authArea').style.display='none';
        document.getElementById('adminPanel').style.display='block';
        renderAdminProducts();
    } else { alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø·Ø£'); }
}

function renderAdminProducts() {
    let products = getProducts();
    let container = document.getElementById('adminProducts'); container.innerHTML='';
    if(!products.length) { container.innerHTML='<div class="alert alert-info">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯.</div>'; return; }
    products.forEach(prod => {
        container.innerHTML += `
        <div class="col-md-4">
        <div class="card p-2">
        <div class="d-flex gap-3">
        <img src="${prod.img}" class="product-img">
        <div>
        <h6>${prod.name}</h6>
        <p class="mb-1 text-danger fw-bold">${prod.price.toLocaleString()} Ø¬Ù†ÙŠÙ‡</p>
        <p class="mb-1"><small>Ø§Ù„Ù‚Ø³Ù…: ${prod.category||'Ø¹Ø§Ù…'}</small></p>
        <div class="mt-2">
            <button class="btn btn-sm btn-primary" onclick="editProduct('${prod.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="btn btn-sm btn-danger" onclick="deleteProduct('${prod.id}')">Ø­Ø°Ù</button>
        </div></div></div></div></div>
        `;
    });
}

function saveProduct() {
    let id=document.getElementById('prodId').value, name=document.getElementById('prodName').value.trim();
    let price=Number(document.getElementById('prodPrice').value);
    let img=document.getElementById('prodImg').value.trim()||'https://via.placeholder.com/300x300?text=No+Image';
    let cat=document.getElementById('prodCat').value.trim();
    if(!name||!price) return alert('Ø§ÙƒØªØ¨ Ø§Ø³Ù… ÙˆØ³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬');
    let products=getProducts();
    if(id){ let idx=products.findIndex(p=>p.id===id); if(idx>-1){ products[idx]={id,name,price,img,category:cat}; } }
    else products.unshift({id:cryptoRandomId(),name,price,img,category:cat});
    saveProducts(products); resetForm(); renderAdminProducts(); alert('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­');
}

function editProduct(id) {
    let p=getProducts().find(x=>x.id===id); if(!p) return alert('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    document.getElementById('prodId').value=p.id;
    document.getElementById('prodName').value=p.name;
    document.getElementById('prodPrice').value=p.price;
    document.getElementById('prodImg').value=p.img;
    document.getElementById('prodCat').value=p.category||'';
    window.scrollTo({top:0,behavior:'smooth'});
}

function deleteProduct(id) {
    if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ØŸ')) return;
    let products=getProducts().filter(p=>p.id!==id);
    saveProducts(products); renderAdminProducts();
}

function resetForm() {
    document.getElementById('prodId').value='';
    document.getElementById('prodName').value='';
    document.getElementById('prodPrice').value='';
    document.getElementById('prodImg').value='';
    document.getElementById('prodCat').value='';
}
</script>

</body>

</html>
