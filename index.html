<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø§Ù‡Ø± ÙÙˆÙ†</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body { background: #f5f5f5; }
        .product-img { height: 220px; object-fit: contain; }
        .navbar-brand { font-size: 25px; font-weight: bold; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark p-3">
    <div class="container d-flex justify-content-between">
        <a class="navbar-brand" href="#">ğŸ“± Ù…Ø§Ù‡Ø± ÙÙˆÙ†</a>
        <div>
            <button class="btn btn-outline-light me-2" onclick="location.href='products.html'">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
            <button class="btn btn-light" onclick="location.href='cart.html'">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</button>
            <button class="btn btn-outline-warning" onclick="location.href='admin.html'">ğŸ”§ Admin</button>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="p-5 text-center bg-white rounded shadow">
        <h1 class="mb-3">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø± Ù…Ø§Ù‡Ø± ÙÙˆÙ†</h1>
        <p class="lead">Ø£ÙØ¶Ù„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª ÙÙŠ Ù…ØµØ± â€“ Ø´Ø­Ù† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</p>
        <button onclick="location.href='products.html'" class="btn btn-dark btn-lg mt-3">ØªØµÙÙ‘Ø­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    </div>

    <h2 class="mt-5">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
    <div id="previewProducts" class="row g-4 mt-2"></div>
</div>

<footer class="bg-dark text-white text-center p-3 mt-5">
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ø§Ù‡Ø± ÙÙˆÙ† 2025
</footer>

<script>
function getProducts() {
    let p = JSON.parse(localStorage.getItem('products'));
    return p && Array.isArray(p) ? p : [];
}

function cryptoRandomId() {
    return 'id-' + Math.random().toString(36).slice(2,9);
}

// Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©
function addToCart(productId) {
    let products = getProducts();
    let prod = products.find(p => p.id === productId);
    if (!prod) return alert("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push({id: prod.id, name: prod.name, price: prod.price, img: prod.img});
    localStorage.setItem('cart', JSON.stringify(cart));
    alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©");
}

// Ø¹Ø±Ø¶ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø¢Ø®Ø± 3 Ù…Ù†ØªØ¬Ø§Øª)
function renderPreview() {
    let products = getProducts();
    let container = document.getElementById('previewProducts');
    container.innerHTML = '';
    if (!products || products.length === 0) {
        container.innerHTML = '<p class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯.</p>';
        return;
    }
    let slice = products.slice(-3).reverse();
    slice.forEach(prod => {
        container.innerHTML += `
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <img src="${prod.img}" class="card-img-top product-img">
                    <div class="card-body text-center">
                        <h5 class="card-title">${prod.name}</h5>
                        <p class="text-danger fw-bold">${prod.price.toLocaleString()} Ø¬Ù†ÙŠÙ‡</p>
                        <button class="btn btn-dark" onclick="addToCart('${prod.id}')">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                    </div>
                </div>
            </div>
        `;
    });
}

// Ø±Ø§Ø­ ÙŠØªÙ†ÙØ° ÙƒÙ„ Ù…Ø±Ø© ØªØªØºÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
window.addEventListener('storage', renderPreview);
renderPreview();
</script>

</body>

</html>
